
/*
 *
 */





/*=============================================================================
   WARNING!!  This file is overwritten by the UIStyler each time the Styler 
   file is saved.
  
  
        Filename:  ufstyler_sample.c
  
        This file was generated by the UG User Interface Styler
        Created by: demo
        Version: Unigraphics V13
              Date: 05-23-97
              Time: 12:50
  
   This template file is overwritten each time the UIStyler dialog is
   saved.  Any modifications to this file will be lost.
==============================================================================*/
 


/*==============================================================================
   Purpose:  This TEMPLATE file contains C source and static structures to      
   guide you in the construction of your UG/Open application dialog.            
   The generation of your dialog file (.dlg extension) is the first step towards
   dialog construction within Unigraphics.  You must now create a UGOpen        
   application that utilizes this file (.dlg).                                  
                                                                                
   The information in this file provides you with the following:                
                                                                                
   1.  Help on the use the functions, UF_MB_add_styler_actions and              
       UF_STYLER_create_dialog in your UG/Open application.  These functions    
       will load and display your UIStyler dialog in Unigraphics.               
                                                                                
       An example of the function, UF_MB_add_styler_actions to associate your   
       dialog to the menubar is shown below (Search on Example 1).              
                                                                                
       An example of a invoking a dialog from a callback utilizing              
       UF_STYLER_create_dialog is also show below (Search for Example 2).       
                                                                                
       An example of a user exit utilizing UF_STYLER_create_dialog is also      
       shown below (Search for Example 3).                                      
                                                                                
   2.  The callback structure: --- DEMO_cbs ---               
       This structure is VERY important if you have callbacks associated with   
       your dialog.  It correlates the dialog items in your dialog with the     
       callback functions you must supply.  You should not modify this          
       structure since it MUST match up to the information stored in your       
       dialog file (.dlg).  Any attempt to do so will cause an error while      
       constructing your dialog.   If you wish to modify the association of     
       your callbacks to your dialog, please reload your dialog file (.dlg) into
       the UIStyler and regenerate your files.                                  
       You do not need to be concerned about this structure, simply pass it as  
       an argument to the function, UF_STYLER_create_dialog along with your     
       dialog file (.dlg).
       
       Example 1 displays the actual call you may make for this particular      
       dialog.                                                                  
                                                                                
   3.  The empty callback functions (stubs) associated with your dialog items   
       have also been placed in this file.  These empty functions have been     
       created simply to start you along with your coding requirements.         
       The function name, argument list and possible return values have already 
       been provided for you.                                                   
                                                                                
==============================================================================*/



/* These include files are needed for the following template code.            */
#include <stdio.h> 
#include <uf.h>
#include <uf_defs.h>
#include <uf_exit.h>
#include <uf_ui.h>
#include <uf_styler.h>
#include <uf_mb.h> 
#include <ufstyler_sample.h>
#include <uf_object_types.h>
#include <uf_modl.h>
#include <string.h>

/* The following definition defines the number of callback entries */
/* in the callback structure:                                      */
/* UF_STYLER_callback_info_t DEMO_cbs */
#define DEMO_CB_COUNT ( 10 + 1 ) /* Add 1 for the terminator */
 
/*--------------------------------------------------------------------------
The following structure defines the callback entries used by the       
styler file.  This structure MUST be passed into the user function,    
UF_STYLER_create_dialog along with DEMO_CB_COUNT.                       
--------------------------------------------------------------------------*/
static UF_STYLER_callback_info_t DEMO_cbs[DEMO_CB_COUNT] = 
{
 {UF_STYLER_DIALOG_INDEX, UF_STYLER_CONSTRUCTOR_CB  , 0, DEMO_constructor_cb},
 {UF_STYLER_DIALOG_INDEX, UF_STYLER_DESTRUCTOR_CB   , 0, DEMO_destructor_cb},
 {UF_STYLER_DIALOG_INDEX, UF_STYLER_OK_CB           , 0, DEMO_ok_callback},
 {UF_STYLER_DIALOG_INDEX, UF_STYLER_APPLY_CB        , 0, DEMO_apply_cb},
 {DEMO_FILTER_TOGGLE    , UF_STYLER_VALUE_CHANGED_CB, 0, DEMO_filter_toggle_callback},
 {DEMO_ADD_PUSH_BUTTON  , UF_STYLER_ACTIVATE_CB     , 0, DEMO_add_activate_cb},
 {DEMO_NEXT_ACTION      , UF_STYLER_ACTIVATE_CB     , 0, DEMO_next_cb},
 {DEMO_BUTTON_LAYOUT    , UF_STYLER_ACTIVATE_CB     , 0, DEMO_blo_6_act_cb},
 {DEMO_EDGES_RADIO_BOX  , UF_STYLER_VALUE_CHANGED_CB, 0, DEMO_edges_radio_vc_cb},
 {DEMO_FIELDS_OPTIONS   , UF_STYLER_ACTIVATE_CB     , 0, DEMO_fields_options_act_cb},
 {UF_STYLER_NULL_OBJECT, UF_STYLER_NO_CB, 0, 0 }
};



/*--------------------------------------------------------------------------
UF_MB_styler_actions_t contains 4 fields.  These are defined as follows:
 
Field 1 : the name of your dialog that you wish to display.
Field 2 : any client data you wish to pass to your callbacks.
Field 3 : your callback structure.
Field 4 : flag to inform menubar of your dialog location.  This flag MUST  
          match the resource set in your dialog!  Do NOT ASSUME that changing 
          this field will update the location of your dialog.  Please use the 
          UIStyler to indicate the position of your dialog.
--------------------------------------------------------------------------*/
static UF_MB_styler_actions_t actions[] = {
    { "ufstyler_sample.dlg",  NULL,   DEMO_cbs,  UF_MB_STYLER_IS_NOT_TOP },
    { NULL,  NULL,  NULL,  0 } /* This is a NULL terminated list */
};


/* Prototypes for local functions */
static int sel_cb ( int num_sel,
                    tag_p_t sel_objects,
                    int num_deselected,
                    tag_p_t deselected_objs,
                    void *user_data,
                    UF_UI_selection_p_t select);

static int filter_cb ( tag_t object,
                       int type[3],
                       void *user_data,
                       UF_UI_selection_p_t select);

static int report( char *file, int line, char *call, int irc);

/* This is a macro that will present an error box containing an error msg,   */
/* file and line number of any possible UF error.                            */
#define UF_CALL(X) (report (__FILE__, __LINE__, #X, (X)))

/*--------------------------------------------------------------------------
This function will display an error message based on the irc error code
from a user function.  This function is used with the macro, UF_CALL.
--------------------------------------------------------------------------*/
static int report( char *file, int line, char *call, int irc )
{
    if (irc)
    {
        char err_msg[UF_UI_MAX_STRING_LEN+1];
        char msg[133];
        char fail_message[133];
        int  len;

        /* Get the user function fail message based on the fail code.*/
        UF_get_fail_message(irc, fail_message);

        /* Generate a string to display in an error box.             */
        sprintf ( err_msg,"%s, line %d: error %d: %s",
                file, line, irc, fail_message);

        /* Make sure that this string isn't too large to fit in the box. */
        len = strlen ( err_msg );
        len = ( len < 131 ) ? len : 131;
        strncpy ( msg, err_msg, len );
        msg[len+1] = '\000';

        /* Display the error message */
        uc1601(err_msg, TRUE);
    }
    return(irc);
}



/*---------------- MENUBAR HOOKUP HELP  Example 1 ----------------
To launch this dialog from a Unigraphics menubar, you must follow 
the steps below.
1)  Add the following lines to your MenuScript file in order to 
    associate a menu bar button with your dialog.  In this     
    example, a cascade menu will be created and will be        
    located just before the Help button on the main menubar.   
    The button, UFSTYLER_SAMPLE_BTN is set up to launch your dialog and 
    will be positioned as the first button on your pulldown menu.
    If you wish to add the button to an existing cascade, simply 
    add the 3 lines between MENU LAUNCH_CASCADE and END_OF_MENU  
    to your menuscript file.  
    
    The MenuScript file requires an extension of ".men".
    Make sure that you add the extension to the file and place  
    the file in your startup directory:
      $UGII_USER_DIR/startup or 
      $UGII_SITE_DIR/startup or 
      $UGII_VENDOR_DIR/startup directory


    Move the contents between the dashed lines to your Menuscript file.
!   ----------------------------------------------------------------
    VERSION 120

    EDIT UG_GATEWAY_MAIN_MENUBAR

    BEFORE UG_HELP
      CASCADE_BUTTON UISTYLER_DLG_CASCADE_BTN
      LABEL Dialog Launcher
    END_OF_BEFORE
 
    MENU UISTYLER_DLG_CASCADE_BTN
      BUTTON UFSTYLER_SAMPLE_BTN
      LABEL Display ufstyler_sample dialog
      ACTIONS ufstyler_sample.dlg
    END_OF_MENU
!   ---------------------------------------------------------------


2) Issue a call to the function, UF_MB_add_styler_actions from the ufsta
   user exit as shown below.  To use this call, remove the conditional 
   definitions:  #ifdef MENUBAR_COMMENTED_OUT 
                 #endif MENUBAR_COMMENTED_OUT 
   
   The static structure, actions, will allow you to associate ALL of your
   dialogs and callback functions to the  menubar at once.  For example, if you 
   wish to have 10 dialogs associated to 10 different buttons on the menubar,
   you may enter each dialog and callback list into the actions structure. Make
   sure that you have created a corresponding button in your MenuScript file.
   
   You may also have separate shared libraries, each with a ufsta user exit
   for each individual dialog.


3) Place your compiled and linked ufsta user function in 
   $UGII_USER_DIR/startup or   
   $UGII_SITE_DIR/startup or 
   $UGII_VENDOR_DIR/startup directory.     
 
   NOTE:  The user function must contain the proper extension .so, .sl or .dll 
   to make ensure that it is recognized by the MenuScript.  If it does not
   have the proper extension, it will NOT be recognized by MenuScript.    


   The action name you have provided in your MenuScript must correspond to
   to the dialog name provided in the action structure.  This MUST match inorder
   to bind your dlg file to your MenuScript button.                            


4) Copy your UIStyler dialog file to the proper directory.
   All dialog files (.dlg) must be located in 
      $UGII_USER_DIR/application or 
      $UGII_SITE_DIR/application or 
      $UGII_VENDOR_DIR/application directory




------------------------------------------------------------*/
extern void ufsta (char *param, int *retcode, int rlen)
{
    int  error_code;
 
    if ( (UF_initialize()) != 0) 
          return;
                                                 
    if ( (error_code = UF_MB_add_styler_actions ( actions ) ) != 0 )
    {
          char fail_message[133];
          
          UF_get_fail_message(error_code, fail_message);
          printf ( "%s\n", fail_message ); 
    }
                                                 
    UF_terminate();                             
    return;
}





/*-------DIALOG CREATION FROM A CALLBACK HELP-Example 2---------
If you wish to have this dialog displayed from the callback of 
another UIStyler dialog, you should:                           

1) Make sure that the callback of your UIStyler dialog is 
   designated as a dialog building callback.              
2) Remove the conditional definitions:
   #ifdef DISPLAY_FROM_CALLBACK 
   #endif DISPLAY_FROM_CALLBACK
3) Your callback should issue a call to this function.
4) You should also add the functional prototype to your header file
   (ufstyler_sample.h) and ensure that the file is properly included.

All dialog files must be located in 
      $UGII_USER_DIR/application or 
      $UGII_SITE_DIR/application or 
      $UGII_VENDOR_DIR/application directory
--------------------------------------------------------------*/



#ifdef DISPLAY_FROM_CALLBACK
extern int <enter the name of your function> ( int *response )
{
    int  error_code = 0;
 
    if ( ( error_code = UF_initialize() ) != 0 ) 
           return (0) ;

    if ( ( error_code = UF_STYLER_create_dialog ( "ufstyler_sample.dlg",
           DEMO_cbs,      /* Callbacks from dialog */
           DEMO_CB_COUNT, /* number of callbacks*/
           NULL,        /* This is your client data */
           response ) ) != 0 )
    {
          char fail_message[133];

          /* Get the user function fail message based on the fail code.*/
          UF_get_fail_message(error_code, fail_message);
          UF_UI_set_status (fail_message);
          printf ( "%s\n", fail_message ); 
    }


    UF_terminate();                             
    return (error_code);
}
#endif /* DISPLAY_FROM_CALLBACK */ 




/*-------DIALOG CREATION FROM A USER EXIT HELP-Example 3-------
To create this dialog from a user exit, you must invoke a     
call to the UG/Open API, UF_STYLER_create_dialog.  An example 
is shown below.                                               

All dialog files must be located in 
      $UGII_USER_DIR/application or 
      $UGII_SITE_DIR/application or 
      $UGII_VENDOR_DIR/application directory

1) Remove the conditional definitions:
   #ifdef DISPLAY_FROM_USER_EXIT 
   #endif DISPLAY_FROM_USER_EXIT 
2) Add a user exit to the function name below, for example, ufusr.
3) Consider how your shared library will be unloaded.  Take a look
   at the generated function ufusr_ask_unload.
--------------------------------------------------------------*/

#ifdef DISPLAY_FROM_USER_EXIT
extern void <enter a valid user exit here> (char *param, int *retcode, int rlen)
{
    int  response   = 0;
    int  error_code = 0;
 
    if ( ( UF_initialize() ) != 0 ) 
           return;

    if ( ( error_code = UF_STYLER_create_dialog ( "ufstyler_sample.dlg",
           DEMO_cbs,      /* Callbacks from dialog */
           DEMO_CB_COUNT, /* number of callbacks*/
           NULL,        /* This is your client data */
           &response ) ) != 0 )
    {
          char fail_message[133];

          /* Get the user function fail message based on the fail code.*/
          UF_get_fail_message(error_code, fail_message);
          UF_UI_set_status (fail_message);
          printf ( "%s\n", fail_message ); 
    }


    UF_terminate();                             
    return;
}




/*--------------------------------------------------------------------------
This function specifies how a shared image is unloaded from memory          
within Unigraphics. This function gives you the capability to unload an     
internal UG/Open application or user  exit from Unigraphics.  You can       
specify any one of the three constants as a return value to determine       
the type of unload to perform:  immediately after user function             
execution, via an unload selection dialog, or when Unigraphics terminates   
terminates.  If you choose UF_UNLOAD_SEL_DIALOG, then you have the          
option to unload your image by selecting  File->Utilities->Unload Shared    
Image. 

NOTE:  A program which associates UG/Open applications with the menubar     
MUST NOT use this option since it will UNLOAD your UG/Open application image
--------
from the menubar.
--------------------------------------------------------------------------*/

extern int ufusr_ask_unload (void)
{
     /* unload immediately after application exits*/
     return ( UF_UNLOAD_IMMEDIATELY );

     /*via the unload selection dialog... */
     /*return ( UF_UNLOAD_SEL_DIALOG );   */
     /*when UG terminates...              */
     /*return ( UF_UNLOAD_UG_TERMINATE ); */
}



/*--------------------------------------------------------------------------
You have the option of coding the cleanup routine to perform any housekeeping
chores that may need to be performed.  If you code the cleanup routine, it is
automatically called by Unigraphics.
--------------------------------------------------------------------------*/
extern void ufusr_cleanup (void)
{
    return;
}
#endif /* DISPLAY_FROM_USER_EXIT */ 






/*-------------------------------------------------------------------------*/
/*---------------------- UIStyler Callback Functions ----------------------*/
/*-------------------------------------------------------------------------*/

/* -------------------------------------------------------------------------
 * Callback Name: DEMO_constructor_cb
 * This is a callback function associated with an action taken from a
 * UIStyler object. 
 *
 * Input: dialog_id   -   The dialog id indicate which dialog this callback
 *                        is associated with.  The dialog id is a dynamic,
 *                        unique id and should not be stored.  It is
 *                        strictly for the use in the UG/Open API:
 *                               UF_STYLER_ask_value(s) 
 *                               UF_STYLER_set_value   
 *        client_data -   Client data is user defined data associated
 *                        with your dialog.  Client data may be bound
 *                        to your dialog with UF_MB_add_styler_actions
 *                        or UF_STYLER_create_dialog.                 
 *        callback_data - This structure pointer contains information
 *                        specific to the UIStyler Object type that  
 *                        invoked this callback and the callback type.
 * -----------------------------------------------------------------------*/
int DEMO_constructor_cb ( int dialog_id,
             void * client_data,
             UF_STYLER_item_value_type_p_t callback_data)
{
     UF_STYLER_item_value_type_t list_data;
     UF_STYLER_item_value_type_t sel_data;
     char * strings[] = {"list item #1",
                        "list item #2",
                        "list item #3",
                        "list item #4"};
     /* This is my mask triple which will set the selection */
     /* to solid faces only. */
     UF_UI_mask_t all_mask[] = {
             UF_solid_type,
             UF_solid_face_subtype,
             UF_UI_SEL_FEATURE_ANY_FACE
     };


     /* Make sure User Function is available. */  
     if ( UF_initialize() != 0) 
          return ( UF_UI_CB_CONTINUE_DIALOG );

     /* ---- Enter your callback code here ----- */

     /* Populate the list.  The constructor callback is invoked prior  */
     /* to making the dialog visible. */
     list_data.item_id       = DEMO_MULTI_LIST;
     list_data.item_attr     = UF_STYLER_SUBITEM_VALUES;
     list_data.count         = 4;
     list_data.indicator     = UF_STYLER_STRING_PTR_VALUE;
     list_data.value.strings = strings;
     if ( UF_CALL ( UF_STYLER_set_value ( dialog_id, &list_data ) ) )
     {
          return (UF_UI_CB_CONTINUE_DIALOG);
     }
 
     /* Get the selection structure from the dialog.*/
     sel_data.item_id    = UF_STYLER_DIALOG_INDEX;
     sel_data.item_attr  = UF_STYLER_SELECTION;
     if ( UF_CALL ( UF_STYLER_ask_value( dialog_id, &sel_data ) ) )
     {
          return (UF_UI_CB_CONTINUE_DIALOG);
     }
 
     /* Set the selection mask */
     if ( UF_CALL ( UF_UI_set_sel_mask ( sel_data.value.selection,
            UF_UI_SEL_MASK_CLEAR_AND_ENABLE_SPECIFIC, 1, all_mask ) ) )
     {
          return (UF_UI_CB_CONTINUE_DIALOG);
     }
 
     /* Add the filter and selection callback to the dialog */
     if ( UF_CALL ( UF_UI_set_sel_procs ( sel_data.value.selection,
                           filter_cb,  /* filter proc */
                           sel_cb,     /* selection proc */
                           NULL )))    /* user data */
     {
          return (UF_UI_CB_CONTINUE_DIALOG);
     }

     UF_terminate ();

    /* Callback acknowledged, do not terminate dialog */
    return (UF_UI_CB_CONTINUE_DIALOG); 
    /* A return value of UF_UI_CB_EXIT_DIALOG will not be accepted    */
    /* for this callback type.  You must continue dialog construction.*/

}


/* -------------------------------------------------------------------------
 * Callback Name: DEMO_destructor_cb
 * This is a callback function associated with an action taken from a
 * UIStyler object. 
 *
 * Input: dialog_id   -   The dialog id indicate which dialog this callback
 *                        is associated with.  The dialog id is a dynamic,
 *                        unique id and should not be stored.  It is
 *                        strictly for the use in the UG/Open API:
 *                               UF_STYLER_ask_value(s) 
 *                               UF_STYLER_set_value   
 *        client_data -   Client data is user defined data associated
 *                        with your dialog.  Client data may be bound
 *                        to your dialog with UF_MB_add_styler_actions
 *                        or UF_STYLER_create_dialog.                 
 *        callback_data - This structure pointer contains information
 *                        specific to the UIStyler Object type that  
 *                        invoked this callback and the callback type.
 * -----------------------------------------------------------------------*/
int DEMO_destructor_cb ( int dialog_id,
             void * client_data,
             UF_STYLER_item_value_type_p_t callback_data)
{
     /* Make sure User Function is available. */  
     if ( UF_initialize() != 0) 
          return ( UF_UI_CB_CONTINUE_DIALOG );

     /* ---- Enter your callback code here ----- */

     UF_terminate ();

    /* Callback acknowledged, do not terminate dialog.              */
    /* A return value of UF_UI_CB_EXIT_DIALOG will not be accepted  */
    /* for this callback type.  You must continue dialog destruction*/
    return (UF_UI_CB_CONTINUE_DIALOG); 

}


/* -------------------------------------------------------------------------
 * Callback Name: DEMO_ok_callback
 * This is a callback function associated with an action taken from a
 * UIStyler object. 
 *
 * Input: dialog_id   -   The dialog id indicate which dialog this callback
 *                        is associated with.  The dialog id is a dynamic,
 *                        unique id and should not be stored.  It is
 *                        strictly for the use in the UG/Open API:
 *                               UF_STYLER_ask_value(s) 
 *                               UF_STYLER_set_value   
 *        client_data -   Client data is user defined data associated
 *                        with your dialog.  Client data may be bound
 *                        to your dialog with UF_MB_add_styler_actions
 *                        or UF_STYLER_create_dialog.                 
 *        callback_data - This structure pointer contains information
 *                        specific to the UIStyler Object type that  
 *                        invoked this callback and the callback type.
 * -----------------------------------------------------------------------*/
int DEMO_ok_callback ( int dialog_id,
             void * client_data,
             UF_STYLER_item_value_type_p_t callback_data)
{
     int                         inx;
     int                         error = 0;
     int                         count = 0;
     char                        message[133];
     UF_STYLER_item_value_type_t data[2];

     /* Make sure User Function is available. */  
     if ( UF_initialize() != 0) 
          return ( UF_UI_CB_CONTINUE_DIALOG );

     /* ---- Enter your callback code here ----- */
     /* Find out what's selected in the option menu */
     data[0].item_id       = DEMO_DIR_OPTIONS;
     data[0].item_attr     = UF_STYLER_VALUE;

     /* Find out what's selected in the radio box */
     data[1].item_id       = DEMO_EDGES_RADIO_BOX;
     data[1].item_attr     = UF_STYLER_VALUE;

     /* Ask for the values of the option menu and radio box*/
     error = UF_STYLER_ask_values ( dialog_id, 2, data, &count );
     if ( error != 0 )
     {
         UF_get_fail_message ( error, message );

         /* Display message to status line */
         UF_UI_set_status ( message );
     }
     else
     {
       /* Print out the asked data */
        for (inx = 0; inx < count; inx++ )
        {
            /* Free any data thay may have been allocated from the free */
             UF_STYLER_free_value ( &data[inx] );
        }
     }


     UF_terminate ();

    /* Callback acknowledged, terminate dialog             */
    /* It is STRONGLY recommended that you exit your       */
    /* callback with UF_UI_CB_EXIT_DIALOG in a ok callback.*/
    /* return ( UF_UI_CB_EXIT_DIALOG );                    */
    return (UF_UI_CB_EXIT_DIALOG);                           

}


/* -------------------------------------------------------------------------
 * Callback Name: DEMO_apply_cb
 * This is a callback function associated with an action taken from a
 * UIStyler object. 
 *
 * Input: dialog_id   -   The dialog id indicate which dialog this callback
 *                        is associated with.  The dialog id is a dynamic,
 *                        unique id and should not be stored.  It is
 *                        strictly for the use in the UG/Open API:
 *                               UF_STYLER_ask_value(s) 
 *                               UF_STYLER_set_value   
 *        client_data -   Client data is user defined data associated
 *                        with your dialog.  Client data may be bound
 *                        to your dialog with UF_MB_add_styler_actions
 *                        or UF_STYLER_create_dialog.                 
 *        callback_data - This structure pointer contains information
 *                        specific to the UIStyler Object type that  
 *                        invoked this callback and the callback type.
 * -----------------------------------------------------------------------*/
int DEMO_apply_cb ( int dialog_id,
             void * client_data,
             UF_STYLER_item_value_type_p_t callback_data)
{
     /* Make sure User Function is available. */  
     if ( UF_initialize() != 0) 
          return ( UF_UI_CB_CONTINUE_DIALOG );

     /* ---- Enter your callback code here ----- */

     UF_terminate ();

    /* Callback acknowledged, do not terminate dialog                 */
    /* A return value of UF_UI_CB_EXIT_DIALOG will not be accepted    */
    /* for this callback type.  You must respond to your apply button.*/
    return (UF_UI_CB_CONTINUE_DIALOG); 

}


/* -------------------------------------------------------------------------
 * Callback Name: DEMO_filter_toggle_callback
 * This is a callback function associated with an action taken from a
 * UIStyler object. 
 *
 * Input: dialog_id   -   The dialog id indicate which dialog this callback
 *                        is associated with.  The dialog id is a dynamic,
 *                        unique id and should not be stored.  It is
 *                        strictly for the use in the UG/Open API:
 *                               UF_STYLER_ask_value(s) 
 *                               UF_STYLER_set_value   
 *        client_data -   Client data is user defined data associated
 *                        with your dialog.  Client data may be bound
 *                        to your dialog with UF_MB_add_styler_actions
 *                        or UF_STYLER_create_dialog.                 
 *        callback_data - This structure pointer contains information
 *                        specific to the UIStyler Object type that  
 *                        invoked this callback and the callback type.
 * -----------------------------------------------------------------------*/
int DEMO_filter_toggle_callback ( int dialog_id,
             void * client_data,
             UF_STYLER_item_value_type_p_t callback_data)
{
     /* Make sure User Function is available. */  
     if ( UF_initialize() != 0) 
          return ( UF_UI_CB_CONTINUE_DIALOG );

     /* ---- Enter your callback code here ----- */

     UF_terminate ();

    /* Callback acknowledged, do not terminate dialog */
    return (UF_UI_CB_CONTINUE_DIALOG); 
    
    /* or Callback acknowledged, terminate dialog.  */
    /* return ( UF_UI_CB_EXIT_DIALOG );             */

}


/* -------------------------------------------------------------------------
 * Callback Name: DEMO_add_activate_cb
 * This is a callback function associated with an action taken from a
 * UIStyler object. 
 *
 * Input: dialog_id   -   The dialog id indicate which dialog this callback
 *                        is associated with.  The dialog id is a dynamic,
 *                        unique id and should not be stored.  It is
 *                        strictly for the use in the UG/Open API:
 *                               UF_STYLER_ask_value(s) 
 *                               UF_STYLER_set_value   
 *        client_data -   Client data is user defined data associated
 *                        with your dialog.  Client data may be bound
 *                        to your dialog with UF_MB_add_styler_actions
 *                        or UF_STYLER_create_dialog.                 
 *        callback_data - This structure pointer contains information
 *                        specific to the UIStyler Object type that  
 *                        invoked this callback and the callback type.
 * -----------------------------------------------------------------------*/
int DEMO_add_activate_cb ( int dialog_id,
             void * client_data,
             UF_STYLER_item_value_type_p_t callback_data)
{
     int                         inx;
     int                         error;
     UF_STYLER_item_value_type_t data[2];
     UF_STYLER_item_value_type_t list_data;
     char                        message[133];
     static int                  sensitivity = 0;
     char                        *string = "This is a new string.";

     /* Make sure User Function is available. */  
     if ( UF_initialize() != 0) 
          return ( UF_UI_CB_CONTINUE_DIALOG );

     /* ---- Enter your callback code here ----- */
    /* Setup to change the sensitivity of the option menu */
    data[0].item_id       = DEMO_DIR_OPTIONS;
    data[0].item_attr     = UF_STYLER_SENSITIVITY;
    data[0].subitem_index = UF_STYLER_NO_SUB_INDEX;
    data[0].value.integer = sensitivity;

    /* Setup to change the sensitivity of the text area */
    data[1].item_id       = DEMO_NAMES_TEXT;
    data[1].item_attr     = UF_STYLER_SENSITIVITY;
    data[1].subitem_index = UF_STYLER_NO_SUB_INDEX;
    data[1].value.integer = sensitivity;


    /* Walk thru the list that was created in the array above and set*/
    /* the individual settings. */
    for (inx = 0; inx < 2 ; inx++ )
    {
        error = UF_STYLER_set_value ( dialog_id, &data[inx] );
        if ( error != 0 )
        {
             UF_get_fail_message ( error, message );

             /* Display message to status line */
             UF_UI_set_status ( message );

             break;
        }
    }

    /* Just flip the sensitivity back and forth for demo purposes*/
    sensitivity = ( sensitivity == 0 ) ? 1 : 0 ;

    /* Let's add a string to the list */
    list_data.item_id       = DEMO_MULTI_LIST;
    list_data.item_attr     = UF_STYLER_LIST_INSERT;
    list_data.subitem_index = UF_STYLER_NO_SUB_INDEX; /* add to bottom */
    list_data.indicator     = UF_STYLER_STRING_VALUE;
    list_data.value.string  = string;
    UF_STYLER_set_value ( dialog_id, &list_data );

    UF_terminate ();

    /* Callback acknowledged, do not terminate dialog */
    return (UF_UI_CB_CONTINUE_DIALOG); 
    
    /* or Callback acknowledged, terminate dialog.    */
    /* return ( UF_UI_CB_EXIT_DIALOG );               */

}


/* -------------------------------------------------------------------------
 * Callback Name: DEMO_next_cb
 * This is a callback function associated with an action taken from a
 * UIStyler object. 
 *
 * Input: dialog_id   -   The dialog id indicate which dialog this callback
 *                        is associated with.  The dialog id is a dynamic,
 *                        unique id and should not be stored.  It is
 *                        strictly for the use in the UG/Open API:
 *                               UF_STYLER_ask_value(s) 
 *                               UF_STYLER_set_value   
 *        client_data -   Client data is user defined data associated
 *                        with your dialog.  Client data may be bound
 *                        to your dialog with UF_MB_add_styler_actions
 *                        or UF_STYLER_create_dialog.                 
 *        callback_data - This structure pointer contains information
 *                        specific to the UIStyler Object type that  
 *                        invoked this callback and the callback type.
 * -----------------------------------------------------------------------*/
int DEMO_next_cb ( int dialog_id,
             void * client_data,
             UF_STYLER_item_value_type_p_t callback_data)
{
     /* Make sure User Function is available. */  
     if ( UF_initialize() != 0) 
          return ( UF_UI_CB_CONTINUE_DIALOG );

     /* ---- Enter your callback code here ----- */

     UF_terminate ();

    /* Callback acknowledged, do not terminate dialog */
    return (UF_UI_CB_CONTINUE_DIALOG); 
    
    /* or Callback acknowledged, terminate dialog.    */
    /* return ( UF_UI_CB_EXIT_DIALOG );               */

}


/* -------------------------------------------------------------------------
 * Callback Name: DEMO_blo_6_act_cb
 * This is a callback function associated with an action taken from a
 * UIStyler object. 
 *
 * Input: dialog_id   -   The dialog id indicate which dialog this callback
 *                        is associated with.  The dialog id is a dynamic,
 *                        unique id and should not be stored.  It is
 *                        strictly for the use in the UG/Open API:
 *                               UF_STYLER_ask_value(s) 
 *                               UF_STYLER_set_value   
 *        client_data -   Client data is user defined data associated
 *                        with your dialog.  Client data may be bound
 *                        to your dialog with UF_MB_add_styler_actions
 *                        or UF_STYLER_create_dialog.                 
 *        callback_data - This structure pointer contains information
 *                        specific to the UIStyler Object type that  
 *                        invoked this callback and the callback type.
 * -----------------------------------------------------------------------*/
int DEMO_blo_6_act_cb ( int dialog_id,
             void * client_data,
             UF_STYLER_item_value_type_p_t callback_data)
{
     /* Make sure User Function is available. */  
     if ( UF_initialize() != 0) 
          return ( UF_UI_CB_CONTINUE_DIALOG );

     /* ---- Enter your callback code here ----- */
     /* The user selected a button in the button layout */
     /* Find out which one was selected */
     printf("Button Number %d was selected in the button layout\n", 
             callback_data->value.integer);

     UF_terminate ();

    /* Callback acknowledged, do not terminate dialog */
    return (UF_UI_CB_CONTINUE_DIALOG); 
    
    /* or Callback acknowledged, terminate dialog.    */
    /* return ( UF_UI_CB_EXIT_DIALOG );               */

}


/* -------------------------------------------------------------------------
 * Callback Name: DEMO_edges_radio_vc_cb
 * This is a callback function associated with an action taken from a
 * UIStyler object. 
 *
 * Input: dialog_id   -   The dialog id indicate which dialog this callback
 *                        is associated with.  The dialog id is a dynamic,
 *                        unique id and should not be stored.  It is
 *                        strictly for the use in the UG/Open API:
 *                               UF_STYLER_ask_value(s) 
 *                               UF_STYLER_set_value   
 *        client_data -   Client data is user defined data associated
 *                        with your dialog.  Client data may be bound
 *                        to your dialog with UF_MB_add_styler_actions
 *                        or UF_STYLER_create_dialog.                 
 *        callback_data - This structure pointer contains information
 *                        specific to the UIStyler Object type that  
 *                        invoked this callback and the callback type.
 * -----------------------------------------------------------------------*/
int DEMO_edges_radio_vc_cb ( int dialog_id,
             void * client_data,
             UF_STYLER_item_value_type_p_t callback_data)
{
     /* Make sure User Function is available. */  
     if ( UF_initialize() != 0) 
          return ( UF_UI_CB_CONTINUE_DIALOG );

     /* ---- Enter your callback code here ----- */
     /* The user selected a toggle button in the radio box*/
     /* Find out which one was selected */
     printf("Toggle Button Number %d was selected in the radio box.\n", 
             callback_data->value.integer);

     UF_terminate ();

    /* Callback acknowledged, do not terminate dialog */
    return (UF_UI_CB_CONTINUE_DIALOG); 
    
    /* or Callback acknowledged, terminate dialog.  */
    /* return ( UF_UI_CB_EXIT_DIALOG );             */

}


/* -------------------------------------------------------------------------
 * Callback Name: DEMO_fields_options_act_cb
 * This is a callback function associated with an action taken from a
 * UIStyler object. 
 *
 * Input: dialog_id   -   The dialog id indicate which dialog this callback
 *                        is associated with.  The dialog id is a dynamic,
 *                        unique id and should not be stored.  It is
 *                        strictly for the use in the UG/Open API:
 *                               UF_STYLER_ask_value(s) 
 *                               UF_STYLER_set_value   
 *        client_data -   Client data is user defined data associated
 *                        with your dialog.  Client data may be bound
 *                        to your dialog with UF_MB_add_styler_actions
 *                        or UF_STYLER_create_dialog.                 
 *        callback_data - This structure pointer contains information
 *                        specific to the UIStyler Object type that  
 *                        invoked this callback and the callback type.
 * -----------------------------------------------------------------------*/
int DEMO_fields_options_act_cb ( int dialog_id,
             void * client_data,
             UF_STYLER_item_value_type_p_t callback_data)
{
     /* Make sure User Function is available. */  
     if ( UF_initialize() != 0) 
          return ( UF_UI_CB_CONTINUE_DIALOG );

     /* ---- Enter your callback code here ----- */

     UF_terminate ();

    /* Callback acknowledged, do not terminate dialog */
    return (UF_UI_CB_CONTINUE_DIALOG); 
    
    /* or Callback acknowledged, terminate dialog.    */
    /* return ( UF_UI_CB_EXIT_DIALOG );               */

}


/*-----------------------------------------------------------------------------
 * Function    : sel_cb
 * Description : This selection callback is invoked when a valid selection
 * is made in the graphics window.  If the filter callback exists and rejects
 * the selection, this callback will not be invoked.
 *
 -----------------------------------------------------------------------------*/
static int sel_cb ( int num_sel,
                    tag_p_t sel_objects,
                    int num_deselected,
                    tag_p_t deselected_objs,
                    void *user_data,
                    UF_UI_selection_p_t select)
{
     UF_STYLER_item_value_type_t label_data;
     char                        string[132];
     tag_p_t                     objects;
     int                         count = 0;
     UF_STYLER_dialog_id_t       dialog_id = -1;

     /* Ask for the number of selected items */
     UF_CALL (UF_UI_ask_sel_object_list ( select, &count, &objects ) );

     /* Place a string in the label object indicating the number of */
     /* objects selected. */
     sprintf(string,"Selected Items %d", count);
     label_data.item_id      = DEMO_SELECT_LABEL;
     label_data.item_attr    = UF_STYLER_LABEL;
     label_data.value.string = string;
     UF_CALL(UF_STYLER_ask_select_dialog_id ( select, &dialog_id ));
     UF_CALL(UF_STYLER_set_value ( dialog_id, &label_data ));

    return (UF_UI_CB_CONTINUE_DIALOG);
}

static int filter_cb ( tag_t object,
                       int type[3],
                       void *user_data,
                       UF_UI_selection_p_t select)
{
     int face_type;

     /* Find out what type of face this is */
     if ( UF_CALL ( UF_MODL_ask_face_type ( object, &face_type ) ) )
          return ( UF_UI_SEL_REJECT );

     /* Accept only CYLINDER, CONE, SPHERE faces, reject all others */
     if ( face_type ==  16 || face_type == 17 || face_type == 18 )
         return ( UF_UI_SEL_ACCEPT );
     else
         return ( UF_UI_SEL_REJECT );
}

